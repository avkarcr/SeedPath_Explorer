'''
–ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –¢–û–õ–¨–ö–û –û–§–õ–ê–ô–ù!
–ò–ª–∏ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–æ—à–µ–ª—å–∫–∞–º–∏.

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å–∏–¥-—Ñ—Ä–∞–∑—ã –∏–∑ —Ñ–∞–π–ª–∞ seeds.txt
–≤ EVM-–∞–¥—Ä–µ—Å–∞ —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫ HDWallet –ª–∏–±–æ BIP-Utils.

HDWallet - —Å—Ç–∞–Ω–¥–∞—Ä—Ç BIP44
BIP-Utils - –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è LEGACY (—Å–º. –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∏–∂–µ)
–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ (LEGACY_MODE) –¥–µ–ª–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ.

============================–ì–õ–ê–í–ù–û–ï============================:
–°–∏–¥-—Ñ—Ä–∞–∑–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –Ω–µ –≤ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞, –∞ –≤ –¥–µ—Ä–µ–≤–æ —Å –º–∏–ª–ª–∏–æ–Ω–∞–º–∏ –∞–¥—Ä–µ—Å–æ–≤.
–° 2014 –≥–æ–¥–∞ –µ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è: BIP44.
–°—Ç–∞–Ω–¥–∞—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Derivation Path: m/44'/60'/0'/0/0.
–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏ —ç—Ç–æ–≥–æ –ø—É—Ç–∏.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ "–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π" —Å–ø–æ—Å–æ–± –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å–∏–¥-—Ñ—Ä–∞–∑—ã - —ç—Ç–æ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—É—Ç–∏ m/44'/60'/0'/0/0.

–ù–æ –µ—Å—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–∏–¥-—Ñ—Ä–∞–∑—ã (—Å 2013 –≥–æ–¥–∞) –≤ —Ä–∞–Ω–Ω–∏—Ö –∫–æ—à–µ–ª—å–∫–∞—Ö –¥–æ –ø—Ä–∏–Ω—è—Ç–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ BIP44
 –¢–∞–º –∫–∞–∂–¥—ã–π –∫–æ—à–µ–ª–µ–∫ –∏–∑–≤—Ä–∞—â–∞–ª—Å—è –∫–∞–∫ —Ç–æ–ª—å–∫–æ –º–æ–≥:
    m/0/i
    m/0/0/i
    m/1/i
    m/44'/0'/0'/0/i
    m/49'/0'/0'/0/i
    m/84'/0'/0'/0/i
 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–¥-—Ñ—Ä–∞–∑—ã —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏, —Ç–∞–º –Ω–∞–¥–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–π —Å–∫—Ä–∏–ø—Ç.
 –ß–∞—Å—Ç—å –∫–æ—à–µ–ª—å–∫–æ–≤, –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º legacy –ø—É—Ç–∏:
    m/44'/60'/0'/0 - legacy Ethereum path (MetaMask / iancoleman)

============================–û–ü–ò–°–ê–ù–ò–ï===========================:
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ HDWallet –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç BIP44, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–æ–∏—Ç –ø—É—Ç—å –ø–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ:
m/44'/60'/0'/0/0 - canonical BIP-44 path,
–≥–¥–µ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç BIP44):
    üìå m (hardened) - –º–∞—Å—Ç–µ—Ä –Ω–æ–¥–∞ (–∫–æ—Ä–µ–Ω—å)
    üìå 44' (hardened) - purpose - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç "—Å—Ç–∞–Ω–¥–∞—Ä—Ç BIP44"
        –º–æ–∂–µ—Ç –±—ã—Ç—å –µ—â–µ:
            44' ‚Äî BIP44
            49' ‚Äî SegWit (P2SH)
            84' ‚Äî Native SegWit (bech32)
    üìå 60' (hardened) - coin_type - —Ç–∏–ø –±–ª–æ–∫—á–µ–π–Ω–∞ (–Ω–æ–º–µ—Ä –±–ª–æ–∫—á–µ–π–Ω–∞)
    –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –æ–¥–Ω–∞ seed-—Ñ—Ä–∞–∑–∞ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –º–Ω–æ–≥–æ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ç–µ–π.
        –Ω–∞–ø—Ä–∏–º–µ—Ä:
            0' - Bitcoin
            60' - Ethereum
            501' - Solana
    üìå 0' (hardened) - account - –∞–∫–∫–∞—É–Ω—Ç (–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
        –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ 0'
        –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
            - —Ä–∞–∑–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤
            - —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π (–ª–∏—á–Ω—ã–π / –±–∏–∑–Ω–µ—Å / —Ö–æ–ª–æ–¥–Ω—ã–π –∫–æ—à–µ–ª–µ–∫)
            - —Ä–∞–∑–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
    üìé 0 (non-hardened) - change - —Ç–∏–ø –∞–¥—Ä–µ—Å–æ–≤ ("–≤—Ö–æ–¥", "—Å–¥–∞—á–∞")
        –ë—ã–≤–∞–µ—Ç –ª–∏–±–æ 0, –ª–∏–±–æ 1.
        –û–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 0, —Ç–∏–ø 1 –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–ª—è Bitcoin,
        –∫–æ–≥–¥–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ BTC, –Ω–æ –æ–Ω –ø—Ä–∏—à–µ–ª –µ—â–µ –Ω–µ –≤–µ—Å—å,
        –æ—Å—Ç–∞—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –Ω–∞ —Ç–∏–ø–µ 1 (change).
        –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –±–ª–æ–∫—á–µ–π–Ω–æ–≤ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ 0.
    üìé 0 (non-hardened) - address_index - –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä
        –ü—Ä–æ—Å—Ç–æ –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 0.
        –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ - —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä.
        –ù–∞–ø—Ä–∏–º–µ—Ä:
            m/44'/0'/0'/0/0 ‚Üí –ø–µ—Ä–≤—ã–π –∞–¥—Ä–µ—Å
            m/44'/0'/0'/0/1 ‚Üí –≤—Ç–æ—Ä–æ–π
            m/44'/0'/0'/0/2 ‚Üí —Ç—Ä–µ—Ç–∏–π
        –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ—à–µ–ª–µ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç –∏–Ω–¥–µ–∫—Å—ã.
'''
from config import INPUT_FILE, OUTPUT_FILE, LEGACY_MODE
from base.legacy import get_legacy_addresses
from base.bip44_hdwallet import get_bip44_addresses


def main():
    with open(INPUT_FILE, "r", encoding="utf-8") as f:
        seeds = [line.strip() for line in f if line.strip()]

    if LEGACY_MODE:
        get_addresses = get_legacy_addresses
    else:
        get_addresses = get_bip44_addresses

    out = [
        "Format: X-Y. Address.",
        "X - number of seed, Y - variations (if any)",
        "=============================================="
    ]

    for i, seed in enumerate(seeds, 1):
        addr = get_addresses(seed)
        for j, a in enumerate(addr, 1):
            out.append(f"{i}-{j}. {a}")

    with open(OUTPUT_FILE, "w", encoding="utf-8") as f:
        f.write("\n".join(out))

    print("OK ‚Üí addresses.txt")


if __name__ == "__main__":
    main()
